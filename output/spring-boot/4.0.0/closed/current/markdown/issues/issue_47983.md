# spring-boot-mail should depend on jakarta.mail:jakarta.mail-api and org.eclipse.angus:angus-mail instead of org.eclipse.angus:jakarta.mail

**Issue番号**: #47983

**状態**: closed | **作成者**: lrozenblyum | **作成日**: 2025-11-07

**ラベル**: type: bug

**URL**: https://github.com/spring-projects/spring-boot/issues/47983

**関連リンク**:
- Commits:
  - [07b13a4](https://github.com/spring-projects/spring-boot/commit/07b13a40b1ee9b42356950127a496af704e1f787)

## 内容

`spring-boot-starter-mail` (at least for 3.5.6 release) brings transitive depenedency `org.eclipse.angus:jakarta.mail`.

However usage of this dependency should be discouraged in Maven/Gradle world because it's an uberjar.
So if the classpath of a module contains jakarta.mail-api or/and angus-mail dependencies we have duplication of classes.

See https://eclipse-ee4j.github.io/angus-mail/#Download_Angus_Mail_Release and also https://github.com/greenmail-mail-test/greenmail/issues/553 for the detail explanation.

Suggestion: depend on jakarta.mail-api and angus-mail as recommended by Angus

## コメント

### コメント 1 by wilkinsona

**作成日**: 2025-11-07

Thanks for raising this.

> So if the classpath of a module contains jakarta.mail-api or/and angus-mail dependencies we have duplication of classes.

I'm not sure that I understand the logic here. Doesn't the problem apply in the other direction too? If `spring-boot-starter-mail` depended on `jakarta.mail:jakarta.mail-api` and `org.eclipse.angus:angus-mail` and the classpath of a module contains `org.eclipse.angus:jakarta.mail`, wouldn't there be duplicate classes in that situation too?

### コメント 2 by lrozenblyum

**作成日**: 2025-11-07

@wilkinsona well in this case it's a problem of another party who included the not-recommended uberjar from `org.eclipse.angus:jakarta.mail` into classpath.
I guess most projects would follow the Angus's recommendations and won't do that anyway.


### コメント 3 by wilkinsona

**作成日**: 2025-11-07

Looking at usage stats on Maven Central is appears to be about 1/3 `org.eclipse.angus:jakarta.mail` and 2/3 `org.eclipse.angus:angus-mail`. I don't think we should change this in 3.x as it may be unexpectedly disruptive. I think we could switch in 4.0 though.

