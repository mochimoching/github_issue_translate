# Deprecated EnvironmentPostProcessor does not resolve arguments

**IssueÁï™Âè∑**: #48047

**Áä∂ÊÖã**: closed | **‰ΩúÊàêËÄÖ**: ciscoo | **‰ΩúÊàêÊó•**: 2025-11-10

**„É©„Éô„É´**: type: regression

**URL**: https://github.com/spring-projects/spring-boot/issues/48047

**Èñ¢ÈÄ£„É™„É≥„ÇØ**:
- Commits:
  - [6158a52](https://github.com/spring-projects/spring-boot/commit/6158a52b8cb98cf70d521363e2e685c6f5d4a489)

## ÂÜÖÂÆπ

<!--
Thanks for raising a Spring Boot issue. Please take the time to review the following
categories as some of them do not apply here.

üôÖ "Please DO NOT Raise an Issue" Cases
- Question
STOP!! Please ask questions about how to use something, or to understand why something isn't
working as you expect it to, on Stack Overflow using the spring-boot tag.
- Security Vulnerability
STOP!! Please don't raise security vulnerabilities here. Head over to https://spring.io/security-policy to learn how to disclose them responsibly.
- Managed Dependency Upgrade
You DO NOT need to raise an issue for a managed dependency version upgrade as there's a semi-automatic process for checking managed dependencies for new versions before a release. BUT pull requests for upgrades that are more involved than just a version property change are still most welcome.
- With an Immediate Pull Request
An issue will be closed as a duplicate of the immediate pull request, so you don't have to raise an issue if you plan to create a pull request immediately.

üêû Bug report (please don't include this emoji/text, just add your details)
Please provide details of the problem, including the version of Spring Boot that you
are using. If possible, please provide a test case or sample application that reproduces
the problem. This makes it much easier for us to diagnose the problem and to verify that
we have fixed it.

üéÅ Enhancement (please don't include this emoji/text, just add your details)
Please start by describing the problem that you are trying to solve. There may already
be a solution, or there may be a way to solve it that you hadn't considered.


TIP: You can always edit your issue if it isn't formatted correctly.
     See https://guides.github.com/features/mastering-markdown 
-->

https://github.com/spring-projects/spring-boot/issues/47272 added back the previous EnvironmentPostProcessor in deprecated form, but the implementation (https://github.com/spring-projects/spring-boot/commit/3a9ab1569616c31d58d7f7b3e6ff9c8c364a9360) seems incomplete.

The following fails:

```java
import org.junit.jupiter.api.Test;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.bootstrap.ConfigurableBootstrapContext;
import org.springframework.boot.env.EnvironmentPostProcessor;
import org.springframework.boot.logging.DeferredLogFactory;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.core.env.ConfigurableEnvironment;
import org.springframework.util.Assert;

@SpringBootTest
class DemoApplicationTests {

	@Test
	void contextLoads() {
	}

    static class DeprecatedEnvironmentPostProcessor implements EnvironmentPostProcessor {

        public DeprecatedEnvironmentPostProcessor(DeferredLogFactory logFactory, ConfigurableBootstrapContext bootstrapContext) {
            Assert.notNull(logFactory, "logFactory must not be null");
            Assert.notNull(bootstrapContext, "bootstrapContext must not be null");
        }

        @Override
        public void postProcessEnvironment(ConfigurableEnvironment environment, SpringApplication application) {

        }

    }

}
```

I had expected that the deprecated `EnvironmentPostProcessor` continue to work, but fails due to null constructor arguments.

Looks like the call to load the deprecated `EnvironmentPostProcessor` missed providing the `ArgumentResolver` as it does for the non-deprecated variant:

https://github.com/spring-projects/spring-boot/blob/c7ec1fa7345b7667f8fe07e2d37689ae63d918f3/core/spring-boot/src/main/java/org/springframework/boot/support/SpringFactoriesEnvironmentPostProcessorsFactory.java#L55

https://github.com/spring-projects/spring-boot/blob/c7ec1fa7345b7667f8fe07e2d37689ae63d918f3/core/spring-boot/src/main/java/org/springframework/boot/support/SpringFactoriesEnvironmentPostProcessorsFactory.java#L63


## „Ç≥„É°„É≥„Éà

### „Ç≥„É°„É≥„Éà 1 by philwebb

**‰ΩúÊàêÊó•**: 2025-11-10

Thanks for trying the RC @ciscoo! 

