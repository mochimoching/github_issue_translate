# 不変のMultiValueMapラッパーを作成

**Issue番号**: [#27608](https://github.com/spring-projects/spring-framework/issues/27608)

**状態**: closed | **作成者**: poutsma | **作成日**: 2021-10-25

**ラベル**: in: core, type: enhancement

**URL**: https://github.com/spring-projects/spring-framework/issues/27608

**関連リンク**:
- Commits:
  - [0a58419](https://github.com/spring-projects/spring-framework/commit/0a58419df4fee5e50b6831c065c1a14bedc5f5f8)
  - [af4e677](https://github.com/spring-projects/spring-framework/commit/af4e677bfc61921123385af55887f3ad1ab0ab4b)

## 内容

現在、`CollectionUtils::unmodifiableMultiValueMap`はターゲットマップの(変更不可能な)コピーを返すため、追加のメモリを割り当てます。このメソッドでは`Collections.unmodifiableMap`ラッパーを使用できません。なぜなら、マップの各値も不変である必要があり、したがって`Collections.unmodifiableList`ラッパーが必要だからです。

JDKの`Collections`と同様に、必要に応じてエントリと値を不変の対応物でラップする`UnmodifiableMultiValueMap`ラッパーを作成する必要があります。
