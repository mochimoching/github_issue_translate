# Upgrade to AspectJ 1.9.8-RC3

**Issue番号**: #27537

**状態**: closed | **作成者**: sbrannen | **作成日**: 2021-10-08

**ラベル**: type: dependency-upgrade

**URL**: https://github.com/spring-projects/spring-framework/issues/27537

**関連リンク**:
- Commits:
  - [2fb3f99](https://github.com/spring-projects/spring-framework/commit/2fb3f9993f34c561223c5dc3b35537d78020e21d)
  - [fa3a2dc](https://github.com/spring-projects/spring-framework/commit/fa3a2dc98142d397c8394e93d79749f345c149a7)

## 内容

## Overview

AspectJ 1.9.8 RC1 was [released](https://github.com/eclipse/org.aspectj/issues/79#issuecomment-938499393) today, so we'll start testing against that and upgrade to 1.9.8 GA once it's been released.

## Resources

- preliminary [release notes](https://htmlpreview.github.io/?https://github.com/eclipse/org.aspectj/blob/29b024efe4cb4db803103aa099d60b9bc85bac6c/docs/dist/doc/README-198.html)

## Deliverables

- Upgrade to AspectJ 1.9.8 GA
- Add note to reference manual regarding changes to LTW support (see AspectJ 1.9.8 release notes for details)


## コメント

### コメント 1 by kriegaex

**作成日**: 2021-10-09

Thanks for adopting the new AspectJ version so quickly. I am looking forward to your feedback. Not knowing what the minimum Java version is in your build system, please note the following caveat:

* The Eclipse Java Compiler (ECJ) 3.2.7 supporting Java 17 now needs JDK 11+ as a build environment, because Eclipse migrated the code base to Java 11. Because the AspectJ Compiler (AJC) contained in `aspectjtools` is an ECJ fork, using a Java-17-enabled AJC version (1.9.8.RC1 and higher) means that you need to run your build on JDK 11+. You can still compile to goals as low as Java 1.3, don't worry. It is only about the build environment. I am not sure if you even use AJC or depend on the AspectJ Tools library anywhere, please check.

* As for LTW, I just verified that for now, the class files contained in the smaller `aspectjweaver` agent library still do not contain any Java 11 class files, i.e. LTW should still work on JDK 8 systems.

### コメント 2 by sbrannen

**作成日**: 2021-10-10

> Thanks for adopting the new AspectJ version so quickly. I am looking forward to your feedback. 

You're welcome. We're glad to help integration test with the RC before the GA release.

Our build is working fine with the changes in fa3a2dc98142d397c8394e93d79749f345c149a7.

> Not knowing what the minimum Java version is in your build system, please note the following caveat:

For Spring Framework 6.0 (`main`), Java 17 is the baseline for the build and any applications using Spring 6.0.


### コメント 3 by jhoeller

**作成日**: 2021-12-14

I'm about to close this issue with an upgrade to AspectJ 1.9.8 RC3 (for 6.0 M1). We can track the AspectJ 1.9.8 GA upgrade in #27416 then.

