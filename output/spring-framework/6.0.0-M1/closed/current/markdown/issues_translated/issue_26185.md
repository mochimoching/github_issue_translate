# CommonAnnotationBeanPostProcessor jakarta.annotation-api:2.0.0サポート (@PostConstruct/@PreDestroy)

**Issue番号**: [#26185](https://github.com/spring-projects/spring-framework/issues/26185)

**状態**: closed | **作成者**: qeepcologne | **作成日**: 2020-12-01

**ラベル**: in: core, type: enhancement

**URL**: https://github.com/spring-projects/spring-framework/issues/26185

**関連リンク**:
- Commits:
  - [d84ca2b](https://github.com/spring-projects/spring-framework/commit/d84ca2ba90d27a7c63d7b35a6259b5b9cf341118)

## 内容

jakarta.annotation:jakarta.annotation-apiを1.3.5から2.0.0にアップグレードしようとしました。

アノテーションがjavax.annotationパッケージからjakarta.annotationパッケージに移動しました。

アップグレード後、@PostConstructと@PreDestroyが動作しません。

CommonAnnotationBeanPostProcessorで両方のパッケージのアノテーションが動作するようにしてください。

## コメント

### コメント 1 by jhoeller

**作成日**: 2020-12-01

残念ながら、Spring Framework 5.x世代では、両方のEE名前空間の並行サポートの計画はありません。`@PostConstruct`と`@PreDestroy`については比較的簡単に実装できますが、`@Inject`とその`Provider`インターフェースについてはすでに難しく、JPAとJMSには重複したモジュールが必要で、Servlet API上のSpring MVCでは事実上不可能です。Spring Framework 6世代で完全な切り替えを行う予定です([#25354](https://github.com/spring-projects/spring-framework/issues/25354)を参照)。おそらく来年、Jakarta EE 10のサポートと共に。

Jakarta EE 9は単なる再パッケージ化であり、まだ新機能を提供していないことに注意してください。1.3よりも2.0のCommons Annotations APIを使用する動機は何ですか? `javax`名前空間から他のEE APIを使用し続けながら、それを単独でアップグレードする価値はどこにあるのでしょうか?

### コメント 2 by qeepcologne

**作成日**: 2020-12-01

迅速な回答と詳細な説明をありがとうございます。

アップグレードの要件はありません。ビッグバンよりも段階的なアップグレードを好むだけです。そうでなければ、アップグレード(tomcat10、spring、spring-security、jakarta api、おそらくその他多数)は非常に大きなブロックとなり、タイムリーに統合されません。

jakarta.mail-apiやjakarta.xml.bind-apiなどのいくつかのapiをすでに切り替えましたが、変更なしでスムーズに動作したものはほとんどありません。

### コメント 3 by hantsy

**作成日**: 2020-12-06

SpringフレームワークがJakarta EE 9/10スタックに移行する前に、Jakarta EE 8.0リリースと並行して、Jakarta EE 9.0バージョン(例: Maven artifactの分類子**jakartaee9**または特定のバージョン)を同時にリリースすることを検討していただきたいです。

Apache TomEE、WildFly 22.0.0 Jakarta EEプレビューなど、[Eclipse Transformerツール](https://projects.eclipse.org/projects/technology.transformer)を使用して既存の作業をJakarta EE 9に変換しているプロジェクトがいくつかあります。

### コメント 4 by hantsy

**作成日**: 2020-12-06

この件でissueを作成しました: https://github.com/spring-projects/spring-framework/issues/26224
