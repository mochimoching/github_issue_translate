# コアフレームワークのビルドをJDK 17にアップグレード

**Issue番号**: [#17778](https://github.com/spring-projects/spring-framework/issues/17778)

**状態**: closed | **作成者**: spring-projects-issues | **作成日**: 2015-07-02

**ラベル**: type: task

**URL**: https://github.com/spring-projects/spring-framework/issues/17778

**関連リンク**:
- Commits:
  - [33cddef](https://github.com/spring-projects/spring-framework/commit/33cddef026ad7a8c86eac0195377d67f00b37674)
  - [b74e938](https://github.com/spring-projects/spring-framework/commit/b74e93807e0443d30cd1a7c5a8671ceae27e3178)

## 内容

**[Juergen Hoeller](https://jira.spring.io/secure/ViewProfile.jspa?name=juergen.hoeller)** が **[SPR-13186](https://jira.spring.io/browse/SPR-13186?redirect=false)** を作成しコメント:

#### 参考資料

- [JDK 9 早期アクセスビルド](https://jdk9.java.net/download/)
- [Gradle 3.0 ナイトリービルド](http://gradle.org/gradle-nightly-build/)
  - [ナイトリーリリースノート](https://docs.gradle.org/nightly/release-notes)
- [Gradle JDK 9サポート](https://github.com/gradle/gradle/blob/master/design-docs/jdk9-support.md) wikiページ

---

**関連Issue:**
- [#17928](https://github.com/spring-projects/spring-framework/issues/17928) マージされたJDK 9メインラインとの互換性 (_**"依存している"**_)
- [#19138](https://github.com/spring-projects/spring-framework/issues/19138) ビルドをGradle 3.0にアップグレード (_**"依存している"**_)
- [#18092](https://github.com/spring-projects/spring-framework/issues/18092) AbstractJpaTestsを削除し、spring-ormテストスイートを適切に修正 (_**"依存している"**_)
- [#18079](https://github.com/spring-projects/spring-framework/issues/18079) JDK 9モジュールメタデータでSpringモジュールを宣言 (_**"依存されている"**_)
- [#17779](https://github.com/spring-projects/spring-framework/issues/17779) 新しいJDK 9 HTTP Client APIのサポート (_**"依存されている"**_)

投票数: 2, ウォッチャー: 12


## コメント

### コメント 1 by spring-projects-issues

**作成日**: 2016-06-15

**[Sam Brannen](https://jira.spring.io/secure/ViewProfile.jspa?name=sbrannen)** がコメント:

[Juergen Hoeller](https://jira.spring.io/secure/ViewProfile.jspa?name=juergen.hoeller)さん、

良いニュースがあります...

`build.gradle`の`compileJava.options*.compilerArgs`から`-Werror`フラグを削除すれば、[Gradle 3.0ナイトリービルド](http://gradle.org/gradle-nightly-build/)を使用してOpenJDK 9早期アクセスビルドでの_スモークテスト_を再開できるようになりました。

```
$> gradlew wrapper --gradle-distribution-url=https://services.gradle.org/distributions-snapshots/gradle-3.0-20160615000025+0000-bin.zip
$> gradlew -version
$> gradlew clean test
```

もちろん、JAXB、XmlBeans、AspectJ、JRuby、JPAテスト用のシャドウClassLoaderなど、動作しないものがたくさんあります。

ただし、実験的に、`spring-oxm/oxm.gradle`に以下の依存関係を宣言することで、Spring OXMのJAXBサポートをコンパイルできました。

```java
xjc 'javax.xml.bind:jaxb-api:2.2.11'
xjc 'com.sun.xml.bind:jaxb-core:2.2.11'
xjc 'com.sun.xml.bind:jaxb-impl:2.2.11'
xjc 'com.sun.xml.bind:jaxb-xjc:2.2.11'
xjc 'javax.activation:activation:1.1.1'
```

それでは、テストを楽しんでください! ;)

追伸: _現在の_JAXB依存関係を参照する推奨方法(com.sun.*を参照せずに)は以下のとおりです:

- `org.glassfish.jaxb:jaxb-xjc:2.2.11`
- `org.glassfish.jaxb:jaxb-runtime:2.2.11`



### コメント 2 by spring-projects-issues

**作成日**: 2017-06-19

**[Juergen Hoeller](https://jira.spring.io/secure/ViewProfile.jspa?name=juergen.hoeller)** がコメント:

当面の間、JDK 8ビルドを継続します。技術的には、`module-info`記述子の提供を決定した時点でJDK 9でビルドする必要がありますが、Spring Framework 6まで`Automatic-Module-Name`エントリ([#18289](https://github.com/spring-projects/spring-framework/issues/18289))で対応できそうです。


### コメント 3 by spring-projects-issues

**作成日**: 2018-11-02

**[Rostislav Krasny](https://jira.spring.io/secure/ViewProfile.jspa?name=rosti)** がコメント:

[Juergen Hoeller](https://jira.spring.io/secure/ViewProfile.jspa?name=juergen.hoeller)さん、Spring Framework 6のビルドに必要な最小JDKバージョンはJDK 11にすべきだと思います。これはJDK 8以降で最初のLong Term Support(LTS)バージョンだからです。JDK 9とJDK 10はサポート期間が非常に短く、すでにOracleのサポートが終了しています。このJiraチケットのタイトルもそれに応じて更新すべきだと思います。


### コメント 4 by spring-projects-issues

**作成日**: 2018-11-04

**[Juergen Hoeller](https://jira.spring.io/secure/ViewProfile.jspa?name=juergen.hoeller)** がコメント:

良い指摘です。Spring Framework 6のJavaベースラインをアップグレードする際は、確実にJDK 11以降を目指します。ただし、現時点では、これが2021年以前に実現する可能性は低いです(次のLTSリリースであるJDK 17が登場する頃で、再びJavaの2世代のLTSをサポート範囲とすることができます)。


### コメント 5 by jhoeller

**作成日**: 2021-09-15

このissueをSpring Framework 6.0のJDK 17ベースライン対応として再利用します。基本的な対応は、[#26901](https://github.com/spring-projects/spring-framework/issues/26901)などの最近のコミットですでに完了しています。

### コメント 6 by jhoeller

**作成日**: 2021-12-14

基本的なアップグレードがすべて完了したため、6.0 M1でこのissueをクローズします。

Javaモジュールシステムへの更なるステップは、後のマイルストーン(例: [#18079](https://github.com/spring-projects/spring-framework/issues/18079))で計画されています。
