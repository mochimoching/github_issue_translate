# Break package tangle between o.s.aot and o.s.core

**Issue番号**: #28496

**状態**: closed | **作成者**: snicoll | **作成日**: 2022-05-20

**ラベル**: type: task, theme: aot

**URL**: https://github.com/spring-projects/spring-framework/issues/28496

**関連リンク**:
- Commits:
  - [16eff68](https://github.com/spring-projects/spring-framework/commit/16eff6835748be5316520b313e08a8a481b900d1)

## 内容

Two hints registrar have been recently added that creates a cycle between those two packages. We should consider moving those, perhaps all the way up to `spring-context` as they aren't really useful without it.

## コメント

### コメント 1 by snicoll

**作成日**: 2022-05-20

The tangle for spring factories hint is a little bit problematic as it relies on a package protected method in `SpringFactories`, cc @philwebb 

### コメント 2 by philwebb

**作成日**: 2022-05-20

Tricky. There's just enough code in `SpringFactoriesLoader.loadFactoriesResource` to make copy/paste unappealing. We could perhaps make it a `protected static` method then have a private subclass in `SpringFactoriesLoaderRuntimeHintsRegistrar` to access it again. Either that, or just make that method public.

### コメント 3 by philwebb

**作成日**: 2022-05-20

It feels a bit odd to have `spring-context` add the factory hints, I think I'd prefer a `org.springframework.aot.support` package that takes care of registering hints for items in `org.springframework.code`.

It would also be really nice to have a checkstyle rule to enforce the layering.

