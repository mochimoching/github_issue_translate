# StackOverflowError when using BindingReflectionHintsRegistrar

**Issue番号**: #28683

**状態**: closed | **作成者**: mhalbritter | **作成日**: 2022-06-23

**ラベル**: type: bug, in: core

**URL**: https://github.com/spring-projects/spring-framework/issues/28683

**関連リンク**:
- Commits:
  - [900349f](https://github.com/spring-projects/spring-framework/commit/900349fcca1cd15d50a26cc4d6a360e30e9f9972)
  - [fb1aa4f](https://github.com/spring-projects/spring-framework/commit/fb1aa4f5d5601ddd1fe7928b39c6408a3003a59a)
  - [b121eed](https://github.com/spring-projects/spring-framework/commit/b121eed7533490448e7e98ca84cf34cd4983b0c8)
  - [fe6fd49](https://github.com/spring-projects/spring-framework/commit/fe6fd498899d6c6d3023d8ef8e8cea6955a3aef6)
  - [58aeab3](https://github.com/spring-projects/spring-framework/commit/58aeab3ab68766676942bd097dc42b5f1d2c553c)
  - [1aaa44b](https://github.com/spring-projects/spring-framework/commit/1aaa44bbfe4a6efbab09f3ac48fe6babd60b2ad9)
  - [0546003](https://github.com/spring-projects/spring-framework/commit/0546003dce08724a90bc715b65893386eaca675e)
  - [61e9aa9](https://github.com/spring-projects/spring-framework/commit/61e9aa9f42b34666d94067c23f9c54eea1226a63)
  - [7df1737](https://github.com/spring-projects/spring-framework/commit/7df17370db12cc91e8b62d70a28a1fdb01101588)
  - [5118751](https://github.com/spring-projects/spring-framework/commit/51187517a3b6fa14e8d0647879d898af90ebe4fa)

## 内容

Minimal reproducer:

```
import org.springframework.hateoas.CollectionModel;

public static void main(String[] args) {
  BindingReflectionHintsRegistrar reflectionHintsRegistrar = new BindingReflectionHintsRegistrar();
  ReflectionHints reflectionHints = new ReflectionHints();
  reflectionHintsRegistrar.registerReflectionHints(reflectionHints, CollectionModel.class);
}
```

It looks like the `ResolvableType` in the `CollectionModel1` is the problem, as this crashes too:

```
reflectionHintsRegistrar.registerReflectionHints(reflectionHints, ResolvableType.class);
```

## コメント

### コメント 1 by mhalbritter

**作成日**: 2022-06-23

The same happens with the `org.springframework.integration.IntegrationPatternType` type.

There's no `ResolvableType` involved, but the type references itself (with a type in between the cycle).

### コメント 2 by mhalbritter

**作成日**: 2022-06-23

It seems the cycle detection is broken:

```
public class Bar {
  public Bar getBar() {
    return null;
  }
}
```

throws an Exception too.

