# Filtering of BeanRegistrationAotProcessor beans should be optional

**Issue番号**: #28526

**状態**: closed | **作成者**: philwebb | **作成日**: 2022-05-25

**ラベル**: type: enhancement, theme: aot

**URL**: https://github.com/spring-projects/spring-framework/issues/28526

**関連リンク**:
- Commits:
  - [6f71328](https://github.com/spring-projects/spring-framework/commit/6f71328ba6f8d2d6d001cf26f24459852ee5dd8f)

## 内容

Currently `BeanDefinitionMethodGeneratorFactory.isImplicitlyExcluded` always filters beans that implement `BeanRegistrationAotProcessor`. For Spring Boot, we think we'll need to have bean that implements `BeanRegistrationAotProcessor` but isn't filtered.

## コメント

### コメント 1 by philwebb

**作成日**: 2022-05-27

I think we can use `BeanRegistrationExcludeFilter` as a signal for this. Any AOT processor bean that doesn't implement `BeanRegistrationExcludeFilter` can be implicitly filtered. If it does implement `BeanRegistrationExcludeFilter` then we consider that a signal that it is handling its own filtering.

### コメント 2 by philwebb

**作成日**: 2022-06-09

Reopening because it's not particularly obvious that `BeanRegistrationExcludeFilter` is being implemented just to exclude the processor. Perhaps a default method on `AotProcessor` might be better.

### コメント 3 by snicoll

**作成日**: 2022-07-13

@philwebb I am assuming this one won't make it the release tomorrow.

### コメント 4 by philwebb

**作成日**: 2022-07-18

Sorry @snicoll, I didn't get to refine it. The original fix is in M5 so I'll move it back and open a new issue 

