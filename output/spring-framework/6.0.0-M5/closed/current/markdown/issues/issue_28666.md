# Stop using SpringFactoriesLoader.loadFactoryNames in the TestContext framework

**Issue番号**: #28666

**状態**: closed | **作成者**: sbrannen | **作成日**: 2022-06-20

**ラベル**: in: test, type: task, theme: aot

**URL**: https://github.com/spring-projects/spring-framework/issues/28666

**関連リンク**:
- Commits:
  - [d1b65f6](https://github.com/spring-projects/spring-framework/commit/d1b65f6d3e90af3f55d1b4d347afb3ebe9a3de44)
  - [f550329](https://github.com/spring-projects/spring-framework/commit/f5503298fb00d0dde053ec3bb4cd9f91c41313a2)

## 内容

`AbstractTestContextBootstrapper.getDefaultTestExecutionListenerClassNames()` is currently the only remaining use of `SpringFactoriesLoader.loadFactoryNames()` in the core Spring Framework.

Since `SpringFactoriesLoader.loadFactoryNames()` will be deprecated in #27954, we should stop using it and remove the `getDefaultTestExecutionListenerClassNames()` method from `AbstractTestContextBootstrapper`. 

We should likely remove `getDefaultTestExecutionListenerClasses()` as well and refactor `getTestExecutionListeners()` to make use of the new `FailureHandler` support in `SpringFactoriesLoader`.

## コメント

### コメント 1 by sbrannen

**作成日**: 2022-06-20

Since `getDefaultTestExecutionListenerClassNames()` and `getDefaultTestExecutionListenerClasses()` are both `protected` methods and therefore part of the "public" API for anyone extending `AbstractTestContextBootstrapper` (see https://github.com/spring-projects/spring-framework/issues/27954#issuecomment-1160646333), we could potentially deprecate those two methods in `5.3.x`.

@jhoeller & @snicoll, thoughts? 

