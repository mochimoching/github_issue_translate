*このドキュメントは生成AI(Claude Sonnet 4.5)によって2026年1月6日に生成されました。*

## 課題概要

`classpath*:`リソースプレフィックスを使用した際に、Javaモジュールシステム（モジュールパス）上のリソースもスキャンできるようにする機能強化です。

**背景説明**:
- **classpath*:**: Springの特殊なリソースプレフィックスで、クラスパス全体から一致するリソースを検索
- **モジュールパス**: Java 9以降のモジュールシステムで使用されるライブラリ検索パス
- **クラスパス**: 従来のJavaのライブラリ検索パス（JARファイルなど）
- **@ComponentScan**: Springが自動的にBeanを検出するためにパッケージをスキャンする機能

**問題の詳細**:
従来のクラスパスベースのアプリケーションでは、`classpath*:`を使用してリソースをスキャンできました：

```java
@ComponentScan("com.example")  // classpath*:が暗黙的に使用される
public class Application {
}
```

しかし、Javaモジュールシステム（モジュールパス）に移行すると、`classpath*:`セマンティクスが機能しなくなる問題がありました。これにより：
- `@ComponentScan`がモジュールパス上のコンポーネントを検出できない
- `ResourcePatternResolver`がモジュール内のリソースを見つけられない
- 既存アプリケーションのモジュールシステム移行が困難

## 原因

`classpath*:`の実装が`ClassLoader`ベースのクラスパススキャンのみをサポートしており、Javaモジュールシステムの新しいリソース検索メカニズムに対応していませんでした。

Java 9以降、モジュールシステムではリソースの配置と検索方法が異なるため、従来のクラスパススキャンロジックでは不十分です。

## 対応方針

以下のコミットで段階的に実装されました：

- [fa8b3ef](https://github.com/spring-projects/spring-framework/commit/fa8b3ef8b61319a08d5238888b3a6f77d18f04f9)
- [19b436c](https://github.com/spring-projects/spring-framework/commit/19b436c6aa14e79e6f3a98c15a8edff2a8c351fc)
- [190a459](https://github.com/spring-projects/spring-framework/commit/190a459cfa538d16f7a73d23759859e4167a7409)
- [957faac](https://github.com/spring-projects/spring-framework/commit/957faac91832a7f6e79ceb79bd573c66dde1afa6)
- [23a58e6](https://github.com/spring-projects/spring-framework/commit/23a58e6bab2b5aecd77e30c2b2d0ee41b643876f)

**実装内容**:

`classpath*:`プレフィックス使用時に、モジュールパスのスキャンを自動的にサポート：

```java
// クラスパスとモジュールパスの両方で動作
@ComponentScan("com.example")
public class Application {
}

// リソースパターン解決も両対応
ResourcePatternResolver resolver = new PathMatchingResourcePatternResolver();
Resource[] resources = resolver.getResources("classpath*:META-INF/*.xml");
// クラスパスとモジュールパス両方から*.xmlを検索
```

**動作イメージ**:
```
従来のクラスパス:
  app.jar/com/example/Service.class  ✅ 検出される
  
モジュールパス:
  my.module/com/example/Service.class  ✅ 検出される（新機能）
```

**デモリポジトリ**: https://github.com/sbrannen/spring-module-system

**メリット**:
- 既存アプリケーションがモジュールシステムに移行しやすく
- `@ComponentScan`がクラスパスとモジュールパスで一貫して動作
- Javaモジュールシステムへの移行パスを提供
- パッチモジュール（patched module）でも動作

**関連課題**: [#21515](https://github.com/spring-projects/spring-framework/issues/21515)
