*このドキュメントは生成AI(Claude Sonnet 4.5)によって2026年1月6日に生成されました。*

## 課題概要

`@HttpExchange`、`@GetExchange`、`@PostExchange`などのアノテーションのURL属性で、Spring Bootの設定プロパティ（`application.yaml`など）で定義された値を参照できるようにする機能強化です。

**背景説明**:
- **プロパティプレースホルダー**: `${property.name}`の形式で、外部設定ファイルの値を参照する仕組み
- **application.yaml/properties**: Spring Bootで環境ごとの設定を管理するファイル

**問題の詳細**:
現状では、`@HttpExchange`でURLをハードコードする必要があります：

```java
@HttpExchange(url = "/multitenant/public/api")
public interface CumulusRepository {
    @GetExchange("/get_stuff")
    Cumulus getCumulusAlerts(@RequestHeader Map<String, String> headers);
}
```

**要望される機能**:
`application.yaml`で定義した値を参照できるようにしたい：

```yaml
# application.yaml
cumulus:
  baseUrl: /multitenant/public/api
  alertUrl: /get_stuff
```

```java
@HttpExchange(url = "${cumulus.baseUrl}")
public interface CumulusRepository {
    @GetExchange("${cumulus.alertUrl}")
    Cumulus getCumulusAlerts(@RequestHeader Map<String, String> headers);
}
```

**利点**:
- 環境ごとにURLを切り替え可能（開発/ステージング/本番）
- URLの管理が集中化
- ハードコード削減

## 原因

`@HttpExchange`のアノテーション処理において、Spring式言語（SpEL）やプロパティプレースホルダーの解決機能が実装されていなかったため。

アノテーション属性値が文字列リテラルとしてのみ扱われ、`${...}`パターンの展開が行われませんでした。

## 対応方針

[2a2fba6](https://github.com/spring-projects/spring-framework/commit/2a2fba6a37666b41205565b7d1a804373a6635d2)のコミットで実装されました。

**実装内容**:

1. **プロパティプレースホルダーの解決**:
   - `@HttpExchange`および関連アノテーションのURL属性で`${property.name}`パターンをサポート
   - Spring Environmentから値を解決

2. **解決タイミング**:
   - HTTPクライアントプロキシ生成時にプレースホルダーを展開
   - ランタイムでの動的な値解決

3. **対応アノテーション**:
   - `@HttpExchange`
   - `@GetExchange`
   - `@PostExchange`
   - `@PutExchange`
   - `@DeleteExchange`
   - `@PatchExchange`

**使用例**:
```yaml
# application.yaml
api:
  base-url: https://api.example.com
  version: v2
```

```java
@HttpExchange(url = "${api.base-url}/${api.version}")
public interface ApiClient {
    @GetExchange("${api.users.endpoint}")  // /users
    List<User> getUsers();
}
```

**設定ファイルでの管理が可能に**:
- 開発環境: `localhost:8080`
- ステージング環境: `staging.example.com`
- 本番環境: `api.example.com`

環境変数やプロファイルごとに異なる値を設定できるようになりました。
