*このドキュメントは生成AI(Claude Sonnet 4.5)によって2026年1月6日に生成されました。*

## 課題概要

`@HttpExchange`アノテーションを使用した宣言的HTTPクライアントメソッドに、リクエスト属性を設定できる機能を追加する機能強化です。

**背景説明**:
- **@HttpExchange**: Spring Framework 6.0で導入された、HTTPクライアントメソッドを宣言的に定義するためのアノテーション。Feignのようなインターフェースベースのクライアント定義が可能
- **リクエスト属性**: HTTPリクエストに付加される任意のメタデータ。フィルターやインターセプターで参照可能
- **WebExchangeFilter**: WebClientのリクエスト/レスポンスを処理するフィルターチェーン

**機能の目的**:
`@HttpExchange`メソッドからフィルターチェーンにヒント情報を渡すことができるようにすること。これにより、セキュリティやログ記録などの横断的関心事をリクエスト単位で制御できます。

**使用例イメージ**:
```java
public interface UserClient {
    @GetMapping("/users/{id}")
    @RequestAttribute(name = "auth-required", value = "true")
    User getUser(@PathVariable String id);
}
```

## 原因

`@HttpExchange`の初期実装では、メソッドレベルでリクエスト属性を指定する仕組みが提供されていませんでした。

リクエスト属性は以下のような用途で有用：
- セキュリティフィルターへのヒント（認証レベル、権限チェック）
- ログフィルターへのメタデータ（ログレベル、ビジネス操作名）
- メトリクス収集のタグ情報
- リトライポリシーの制御

## 対応方針

以下のコミットで実装されました：

- [496c1dc](https://github.com/spring-projects/spring-framework/commit/496c1dcae195194be4c6c829b5e6a510d0817032)
- [495507e](https://github.com/spring-projects/spring-framework/commit/495507e5d40bec0b7cd1d2759e9aed81bdb3ad07)

**実装内容**:
リクエスト属性のリゾルバを追加し、`@HttpExchange`メソッドのパラメータまたはメソッドアノテーションからリクエスト属性を設定できるようにしました。

これにより、`WebExchangeFilter`チェーンで以下のことが可能に：
1. メソッド固有のリクエスト属性を参照
2. 属性値に基づいてフィルター処理を分岐
3. セキュリティやビジネスロジックの制御

**利点**:
- 宣言的なメタデータ管理
- フィルターとクライアントメソッドの疎結合
- テスト容易性の向上
