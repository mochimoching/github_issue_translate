*このドキュメントは生成AI(Claude Sonnet 4.5)によって2026年1月6日に生成されました。*

## 課題概要

GraalVMネイティブイメージのビルド時に`DataSize`クラスの初期化を停止する設定を元に戻すタスクです。

**背景説明**:
- **DataSize**: Spring Frameworkのデータサイズを表すクラス（例: 10MB、5GB）
- **ビルド時初期化**: GraalVMでネイティブイメージをビルドする際に、クラスを事前に初期化すること
- **実行時初期化**: ネイティブイメージの実行時にクラスを初期化すること

**問題の経緯**:

1. **[#28328](https://github.com/spring-projects/spring-framework/issues/28328)で実施した変更**:
   GraalVMの制限（[oracle/graal#4489](https://github.com/oracle/graal/issues/4489)）に対応するため、`DataSize`クラスをビルド時に初期化しないよう設定：
   ```properties
   # ビルド時初期化を無効化
   Args = --initialize-at-run-time=org.springframework.util.unit.DataSize
   ```

2. **[#28560](https://github.com/spring-projects/spring-framework/issues/28560)での解決**:
   GraalVM側の問題が解決され、`DataSize`をビルド時に初期化しても問題なくなった

3. **本課題**:
   不要になった回避策の設定を削除し、通常のビルド時初期化に戻す

## 原因

当初、GraalVMに以下のような制限がありました：
- 特定の条件下で、`DataSize`クラスのビルド時初期化が失敗する
- この問題を回避するため、実行時初期化を強制する設定が必要だった

しかし、この制限がGraalVM側で解決されたため、回避策の設定が不要になりました。

## 対応方針

[92f8ab7](https://github.com/spring-projects/spring-framework/commit/92f8ab774f6616a2c47b91ec74a95f96c596b954)のコミットで実装されました。

**実装内容**:

`META-INF/native-image/org.springframework/spring-core/native-image.properties`から設定を削除：

```properties
# 削除前
Args = --initialize-at-run-time=org.springframework.util.unit.DataSize

# 削除後
# （エントリ自体を削除）
```

**変更の影響**:

1. **ビルド時の動作**:
   ```
   削除前:
   DataSizeクラス → 実行時初期化（遅延）
   
   削除後:
   DataSizeクラス → ビルド時初期化（標準）
   ```

2. **実行時のパフォーマンス**:
   - ビルド時初期化により、起動時間がわずかに改善
   - メモリ使用量の最適化

3. **ビルド時間**:
   - ビルド時にクラスを初期化するため、ビルド時間はわずかに増加する可能性（通常は無視できるレベル）

**DataSizeクラスの使用例**（変更前後で動作は同じ）:
```java
@ConfigurationProperties
public class MyProperties {
    private DataSize maxUploadSize = DataSize.ofMegabytes(10);
    private DataSize cacheSize = DataSize.ofGigabytes(2);
    
    // getters/setters
}
```

**メリット**:
- 不要な回避策の削除
- より標準的なGraalVM設定
- ビルド時初期化によるわずかなパフォーマンス改善
- コードベースの簡素化

**関連課題**:
- [#28560](https://github.com/spring-projects/spring-framework/issues/28560): GraalVM側の問題解決
- [#28328](https://github.com/spring-projects/spring-framework/issues/28328): 元の回避策の追加
- [oracle/graal#4489](https://github.com/oracle/graal/issues/4489): GraalVMの該当Issue
