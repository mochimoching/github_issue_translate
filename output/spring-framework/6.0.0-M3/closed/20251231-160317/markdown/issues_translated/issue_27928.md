# GradleのapiDiffタスクがマイルストーンに対して動作しない

**Issue番号**: #27928

**状態**: closed | **作成者**: snicoll | **作成日**: 2022-01-13

**ラベル**: type: task

**URL**: https://github.com/spring-projects/spring-framework/issues/27928

**関連リンク**:
- Commits:
  - [2d9c9fe](https://github.com/spring-projects/spring-framework/commit/2d9c9fe9cca01f0851158424134467e96f6debcf)

## 内容

`./gradlew apiDiff -PbaselineVersion=6.0.0-M1`を実行すると、次のようになります:

```
Starting a Gradle Daemon (subsequent builds will be faster)
> Task :spring-instrument:apiDiff FAILED
> Task :spring-jcl:apiDiff FAILED

FAILURE: Build completed with 2 failures.

1: Task failed with an exception.
-----------
* What went wrong:
Execution failed for task ':spring-instrument:apiDiff'.
> Could not resolve all files for configuration ':detachedConfiguration9'.
   > Could not find org.springframework:spring-instrument:6.0.0-M1.
     Searched in the following locations:
       - https://repo.maven.apache.org/maven2/org/springframework/spring-instrument/6.0.0-M1/spring-instrument-6.0.0-M1.pom
       - https://repo.spring.io/libs-spring-framework-build/org/springframework/spring-instrument/6.0.0-M1/spring-instrument-6.0.0-M1.pom
     Required by:
         project :

* Try:
> Run with --stacktrace option to get the stack trace.
> Run with --info or --debug option to get more log output.
> Run with --scan to get full insights.
==============================================================================

2: Task failed with an exception.
-----------
* What went wrong:
Execution failed for task ':spring-jcl:apiDiff'.
> Could not resolve all files for configuration ':detachedConfiguration10'.
   > Could not find org.springframework:spring-jcl:6.0.0-M1.
     Searched in the following locations:
       - https://repo.maven.apache.org/maven2/org/springframework/spring-jcl/6.0.0-M1/spring-jcl-6.0.0-M1.pom
       - https://repo.spring.io/libs-spring-framework-build/org/springframework/spring-jcl/6.0.0-M1/spring-jcl-6.0.0-M1.pom
     Required by:
         project :

* Try:
> Run with --stacktrace option to get the stack trace.
> Run with --info or --debug option to get more log output.
> Run with --scan to get full insights.
==============================================================================

* Get more help at https://help.gradle.org

Deprecated Gradle features were used in this build, making it incompatible with Gradle 8.0.

You can use '--warning-mode all' to show the individual deprecation warnings and determine if they come from your own scripts or plugins.

See https://docs.gradle.org/7.3.3/userguide/command_line_interface.html#sec:command_line_warnings

BUILD FAILED in 15s
31 actionable tasks: 8 executed, 4 from cache, 19 up-to-date
```

マイルストーンリポジトリを手動で追加すると問題が解決します。
