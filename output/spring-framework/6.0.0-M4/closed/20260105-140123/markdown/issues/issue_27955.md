# Support AOT registration of Spring Factories

**Issue番号**: #27955

**状態**: closed | **作成者**: bclozel | **作成日**: 2022-01-19

**ラベル**: in: core, theme: aot

**URL**: https://github.com/spring-projects/spring-framework/issues/27955

**関連リンク**:
- Commits:
  - [2961426](https://github.com/spring-projects/spring-framework/commit/2961426d8ad256983ffe1445acd4cbfaab4fd5db)
  - [267b914](https://github.com/spring-projects/spring-framework/commit/267b91486efd409a4f095be4a87db2c45fee1322)
  - [6a67b4a](https://github.com/spring-projects/spring-framework/commit/6a67b4a2aa22da5a252b4fe5e9d5fd5fe494e1c1)
  - [e6c0152](https://github.com/spring-projects/spring-framework/commit/e6c0152916806905dcdf106798de0b475391f830)

## 内容

As seen in #27753, `SpringFactoriesLoader` is currently supported in Spring Native through subtitutions and complex AOT processors.

We'd like to improve `SpringFactoriesLoader` and allow static registration of Spring Factories, something our AOT processing could leverage and call early during application startup. Once a Factory type is registered with entries, `SpringFactoriesLoader` should use this entry as a pre-warmed cache and never look for additional entries in `spring.factories` files, skipping all the resource loading and reflection operations.

Instead of registering String instances as entries, this new contract might take `Supplier` instances instead, maybe mirroring the new contract to be added in #27954

