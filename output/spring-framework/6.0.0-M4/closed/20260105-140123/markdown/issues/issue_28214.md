# Introduce HttpStatusCode interface

**Issue番号**: #28214

**状態**: closed | **作成者**: poutsma | **作成日**: 2022-03-22

**ラベル**: in: web, type: enhancement

**URL**: https://github.com/spring-projects/spring-framework/issues/28214

**関連リンク**:
- Commits:
  - [f49de92](https://github.com/spring-projects/spring-framework/commit/f49de92ac042b847b9d50bc5e9c606471383213a)
  - [28ac0d3](https://github.com/spring-projects/spring-framework/commit/28ac0d3883e0c683fb995dffc0af7c8a82f3c3d0)
  - [ca4b6e8](https://github.com/spring-projects/spring-framework/commit/ca4b6e86a4dd7f278049a6d91196d817c7953c43)
  - [05df42c](https://github.com/spring-projects/spring-framework/commit/05df42c58aa7d094d2b49b783bb525c8013ae93d)

## 内容

According to [the HTTP specification](https://datatracker.ietf.org/doc/html/rfc2616#section-6.1.1), the HTTP response status can be any 3-digit integer. 

In Spring Framework, the HTTP status codes are enumerated in `HttpStatus`. Because this type is a Java `enum`, we need to have workarounds to allow for status codes not in the enum. For instance, the `ClientHttpResponse` interfaces offers both `getStatusCode` as well as `getRawStatusCode`, as does WebClient's `ClientResponse`, and we have similar workarounds in other places.

We cannot change `HttpStatus` from a enum to a class like we did for `HttpMethod` in #27697, because `HttpStatus` is used in the `ResponseStatus` annotation, where class instances can not be used as values.

@philwebb suggested that we can introduce a new interface `HttpStatusCode`, which is implemented by `HttpStatus`. Code that currently returns a `HttpStatus` will return this new `HttpStatusCode` instead, and we will deprecate the methods that return the raw status codes. All methods that *accepts* the raw integer values will still be available, we will only deprecate the integer returning methods.

Instances of the `HttpStatusCode` are obtained via static `valueOf(int)` factory method, which returns a `HttpStatus` enum entry if one is available for the given integer, and a default implementation otherwise. This way, we can assure that `HttpStatus`  instance comparisons  (i.e. `if (statusCode == HttpStatus.OK)`) will keep working as they currently do.


